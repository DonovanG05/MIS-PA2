<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Admin Portal - Freelance Music</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />

    <!-- Bootstrap Icons -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
      integrity="sha384-tViUnnbYAV00FLIhhi3v/dWt3Jxw4gZQcNoSCxCIFNJVCx7/D55/wXsrNIRANwdD"
      crossorigin="anonymous"
    />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="./styles/main.css" />
  </head>
  <body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary py-3">
      <div class="container">
        <a class="navbar-brand fw-bold fs-3" href="homepage.html">
          <span style="font-size: 1.2em;">ðŸŽµ</span> Freelance Music
        </a>
        <div class="navbar-nav ms-auto">
          <span class="navbar-text me-3">
            <i class="bi bi-person-gear me-1"></i>Admin Portal
          </span>
          <a class="btn btn-outline-light btn-sm" href="homepage.html">
            <i class="bi bi-house me-1"></i>Home
          </a>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <div class="container-fluid py-4">
      <div class="row">
        <!-- Sidebar -->
        <div class="col-md-3 col-lg-2">
          <div class="list-group">
            <a href="#dashboard" class="list-group-item list-group-item-action active" data-bs-toggle="tab">
              <i class="bi bi-speedometer2 me-2"></i>Dashboard
            </a>
            <a href="#reports" class="list-group-item list-group-item-action" data-bs-toggle="tab">
              <i class="bi bi-graph-up me-2"></i>Reports
            </a>
            <a href="#bookings" class="list-group-item list-group-item-action" data-bs-toggle="tab">
              <i class="bi bi-calendar-check me-2"></i>Lesson Bookings
            </a>
            <a href="#calendar" class="list-group-item list-group-item-action" data-bs-toggle="tab">
              <i class="bi bi-calendar3 me-2"></i>Calendar View
            </a>
            <a href="#users" class="list-group-item list-group-item-action" data-bs-toggle="tab">
              <i class="bi bi-people me-2"></i>Users
            </a>
            <a href="#transactions" class="list-group-item list-group-item-action" data-bs-toggle="tab">
              <i class="bi bi-cash-coin me-2"></i>Transactions
            </a>
          </div>
        </div>

        <!-- Main Content Area -->
        <div class="col-md-9 col-lg-10">
          <div class="tab-content">
            <!-- Dashboard Tab -->
            <div class="tab-pane fade show active" id="dashboard">
              <h2 class="mb-4">Admin Dashboard</h2>
              
              <!-- Stats Cards -->
              <div class="row mb-4">
                <div class="col-md-3">
                  <div class="card bg-primary text-white">
                    <div class="card-body">
                      <div class="d-flex justify-content-between">
                        <div>
                          <h4 class="card-title">Users Joined</h4>
                          <h2 class="mb-0" id="totalUsers">0</h2>
                        </div>
                        <div class="align-self-center">
                          <i class="bi bi-people fs-1"></i>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-md-3">
                  <div class="card bg-success text-white">
                    <div class="card-body">
                      <div class="d-flex justify-content-between">
                        <div>
                          <h4 class="card-title">Lessons Booked</h4>
                          <h2 class="mb-0" id="totalBookings">0</h2>
                        </div>
                        <div class="align-self-center">
                          <i class="bi bi-calendar-check fs-1"></i>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-md-3">
                  <div class="card bg-warning text-white">
                    <div class="card-body">
                      <div class="d-flex justify-content-between">
                        <div>
                          <h4 class="card-title">Repeat Students</h4>
                          <h2 class="mb-0" id="repeatStudents">0</h2>
                        </div>
                        <div class="align-self-center">
                          <i class="bi bi-arrow-repeat fs-1"></i>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-md-3">
                  <div class="card bg-info text-white">
                    <div class="card-body">
                      <div class="d-flex justify-content-between">
                        <div>
                          <h4 class="card-title">Recurring Lessons</h4>
                          <h2 class="mb-0" id="recurringLessons">0</h2>
                        </div>
                        <div class="align-self-center">
                          <i class="bi bi-calendar-week fs-1"></i>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Quick Stats -->
              <div class="row">
                <div class="col-md-6">
                  <div class="card">
                    <div class="card-header">
                      <h5 class="mb-0">Most Popular Instruments</h5>
                    </div>
                    <div class="card-body">
                      <div id="popularInstrumentsChart">
                        <p class="text-muted">No data available</p>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="card">
                    <div class="card-header">
                      <h5 class="mb-0">Revenue by Quarter</h5>
                    </div>
                    <div class="card-body">
                      <div id="revenueChart">
                        <p class="text-muted">No data available</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Reports Tab -->
            <div class="tab-pane fade" id="reports">
              <h2 class="mb-4">Reports & Analytics</h2>
              
              <!-- Revenue Report -->
              <div class="row mb-4">
                <div class="col-12">
                  <div class="card">
                    <div class="card-header">
                      <h5 class="mb-0">Platform Revenue Report - Quarterly Breakdown (10% Fees)</h5>
                    </div>
                    <div class="card-body">
                      <canvas id="revenueBarChart" width="400" height="200"></canvas>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Referral Report -->
              <div class="row mb-4">
                <div class="col-md-4">
                  <div class="card">
                    <div class="card-header">
                      <h5 class="mb-0">Referral Report - How Students Heard About Us</h5>
                    </div>
                    <div class="card-body">
                      <canvas id="referralChart" width="400" height="300"></canvas>
                    </div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="card">
                    <div class="card-header">
                      <h5 class="mb-0">Popular Instruments Report</h5>
                    </div>
                    <div class="card-body">
                      <canvas id="popularInstrumentsReportChart" width="400" height="300"></canvas>
                    </div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="card">
                    <div class="card-header">
                      <h5 class="mb-0">Repeat Lessons Report - Student Loyalty</h5>
                    </div>
                    <div class="card-body">
                      <canvas id="repeatLessonsChart" width="400" height="300"></canvas>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Revenue Distribution Reports -->
              <div class="row">
                <div class="col-md-6">
                  <div class="card">
                    <div class="card-header">
                      <h5 class="mb-0">Revenue Distribution by Instrument</h5>
                    </div>
                    <div class="card-body">
                      <canvas id="revenueByInstrumentChart" width="400" height="300"></canvas>
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="card">
                    <div class="card-header">
                      <h5 class="mb-0">Revenue Distribution by Student</h5>
                    </div>
                    <div class="card-body">
                      <canvas id="revenueByStudentChart" width="400" height="300"></canvas>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Bookings Tab -->
            <div class="tab-pane fade" id="bookings">
              <h2 class="mb-4">Lesson Bookings - Table View</h2>
              
              <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                  <h5 class="mb-0">All Booked Lessons</h5>
                  <div class="btn-group" role="group">
                    <button type="button" class="btn btn-outline-primary btn-sm" onclick="exportBookings()">Export</button>
                    <button type="button" class="btn btn-outline-secondary btn-sm" onclick="filterBookings()">Filter</button>
                  </div>
                </div>
                <div class="card-body">
                  <div class="table-responsive">
                    <table class="table table-striped" id="bookingsTable">
                      <thead>
                        <tr>
                          <th>Date</th>
                          <th>Time</th>
                          <th>Teacher</th>
                          <th>Student</th>
                          <th>Instrument</th>
                          <th>Type</th>
                          <th>Duration</th>
                          <th>Status</th>
                          <th>Revenue</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td colspan="9" class="text-center text-muted">No bookings found</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>

            <!-- Calendar Tab -->
            <div class="tab-pane fade" id="calendar">
              <h2 class="mb-4">Lesson Bookings - Calendar View</h2>
              
              <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                  <h5 class="mb-0">Booked Lessons Calendar</h5>
                  <div class="btn-group" role="group">
                    <button type="button" class="btn btn-outline-primary btn-sm" onclick="previousMonth()">Previous</button>
                    <button type="button" class="btn btn-outline-secondary btn-sm" onclick="goToCurrentMonth()">Today</button>
                    <button type="button" class="btn btn-outline-primary btn-sm" onclick="nextMonth()">Next</button>
                  </div>
                </div>
                <div class="card-body">
                  <div id="calendarView">
                    <div class="text-center">
                      <h4 id="currentMonth">January 2024</h4>
                      <div id="calendarGrid" class="calendar-grid">
                        <!-- Calendar will be generated here -->
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Users Tab -->
            <div class="tab-pane fade" id="users">
              <h2 class="mb-4">Users Management</h2>
              
              <div class="row mb-4">
                <div class="col-md-4">
                  <div class="card bg-primary text-white">
                    <div class="card-body text-center">
                      <h4 class="card-title">Total Users Joined</h4>
                      <h2 class="mb-0" id="usersJoinedCount">0</h2>
                      <p class="mb-0">All time</p>
                    </div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="card bg-success text-white">
                    <div class="card-body text-center">
                      <h4 class="card-title">Repeat Students</h4>
                      <h2 class="mb-0" id="repeatStudentsCount">0</h2>
                      <p class="mb-0">Multiple lessons</p>
                    </div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="card bg-warning text-white">
                    <div class="card-body text-center">
                      <h4 class="card-title">Active Users</h4>
                      <h2 class="mb-0" id="activeUsersCount">0</h2>
                      <p class="mb-0">This month</p>
                    </div>
                  </div>
                </div>
              </div>

              <div class="card">
                <div class="card-header">
                  <h5 class="mb-0">User Statistics</h5>
                </div>
                <div class="card-body">
                  <div class="row">
                    <div class="col-md-6">
                      <h6>Users by Type</h6>
                      <canvas id="usersByTypeChart" width="400" height="200"></canvas>
                    </div>
                    <div class="col-md-6">
                      <h6>User Registration Timeline</h6>
                      <canvas id="userRegistrationChart" width="400" height="200"></canvas>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Transactions Tab -->
            <div class="tab-pane fade" id="transactions">
              <h2 class="mb-4">Transaction Management</h2>
              
              <!-- Revenue Summary -->
              <div class="row mb-4">
                <div class="col-md-4">
                  <div class="card bg-success text-white">
                    <div class="card-body text-center">
                      <h4 class="card-title">Total Transactions</h4>
                      <h2 class="mb-0" id="totalTransactions">0</h2>
                      <p class="mb-0">Completed payments</p>
                    </div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="card bg-primary text-white">
                    <div class="card-body text-center">
                      <h4 class="card-title">Platform Revenue</h4>
                      <h2 class="mb-0" id="platformRevenue">$0.00</h2>
                      <p class="mb-0">10% platform fees</p>
                    </div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="card bg-info text-white">
                    <div class="card-body text-center">
                      <h4 class="card-title">Average Fee</h4>
                      <h2 class="mb-0" id="avgFee">$0.00</h2>
                      <p class="mb-0">Per transaction</p>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Transactions Table -->
              <div class="card">
                <div class="card-header">
                  <h5 class="mb-0">All Transactions</h5>
                </div>
                <div class="card-body">
                  <div class="table-responsive">
                    <table class="table table-striped" id="transactionsTable">
                      <thead>
                        <tr>
                          <th>Date</th>
                          <th>Transaction ID</th>
                          <th>Student</th>
                          <th>Teacher</th>
                          <th>Lesson</th>
                          <th>Total Amount</th>
                          <th>Platform Fee (10%)</th>
                          <th>Teacher Earnings</th>
                          <th>Status</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td colspan="9" class="text-center text-muted">No transactions yet</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Bootstrap JS bundle -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>

    <!-- Lesson Details Modal -->
    <div class="modal fade" id="lessonDetailsModal" tabindex="-1">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Lesson Details</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <div id="lessonDetailsContent">
              <!-- Lesson details will be populated here -->
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Custom JS -->
    <script src="./scripts/admin-portal.js"></script>
  </body>
</html>
